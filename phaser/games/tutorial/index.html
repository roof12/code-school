<!doctype html> 
<html lang="en"> 
<head>
	<meta charset="UTF-8" />
	<title>Phaser - Making your first game, part 1</title>
	<script type="text/javascript" src="js/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>
	<script type="text/javascript">

	var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });

	function preload() {
		game.load.image('ground', 'assets/platform.png');
		game.load.image('sky', 'assets/sky.png');
		game.load.image('diamond', 'assets/diamond.png');
		game.load.image('star', 'assets/star.png');
		game.load.spritesheet('dude', 'assets/dude.png', 32, 48);
		game.load.spritesheet('ship', 'assets/ship360_32.png', 32, 32, 72);

	}

	function create() {
		game.physics.startSystem(Phaser.Physics.ARCADE);

		game.add.sprite(50, 50, 'diamond');
		game.add.sprite(0, 0, 'star');

		player = game.add.sprite(32, game.world.height - 150, 'ship');
		game.physics.arcade.enable(player);

		player.animations.add('left');
		player.animations.add('right');

		cursors = game.input.keyboard.createCursorKeys();

		// add keyboard controls
		game.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACEBAR]);
		thrust = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);
	}

	function update() {
		player.body.velocity.x = 0;
		player.body.velocity.y = 0;

		if (cursors.left.isDown) {
			//  Turn to the left
			if (player.frame <= 0) {
				player.frame = 71;
			} else {
				player.frame -= 1;
			}
		}
		else if (cursors.right.isDown) {
			//  Turn to the right
			if (player.frame >= 71) {
				player.frame = 0;
			} else {
				player.frame += 1;
			}
		}
		else {
			//  Stand still
			// player.animations.stop();
			// player.frame = 4;
		}

		if (thrust.isDown) {
			speed = 100;
			angle = player.frame * 5;
			dx = Math.sin(toRadians(angle));
			dy = - Math.cos(toRadians(angle));

			player.body.velocity.x = dx * speed;
			player.body.velocity.y = dy * speed;
		}
	}

	function toRadians (angle) {
		return angle * (Math.PI / 180);
	}
	</script>

</body>
</html>